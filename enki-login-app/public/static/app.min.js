"use strict";function populateNetworkId(n){var e,o=window.enki.ETH_NETWORKS;switch(n){case"1":e="You are on the "+o[n]+".";break;case"2":case"3":case"4":case"42":e="You are on the "+o[n]+" test network.";break;default:e="This is an unknown network with ID = "+n+"."}return $("#network-watcher").text(e),console.log(e),{netId:n,netIdMsg:e}}function populateAccountMenu(n){var e=window.enki.cachedAccounts();if(null===e||void 0===e||0===e.length)return alert("No accounts to log in! Create or import one first."),null;var o=$("#"+n),t=$("#"+n+" .cst-input-vid-addr").first();return t.empty(),e.map(function(n){t.append('<option value="'+n+'">'+n+"</option>")}),o}function showSignupModal(){var n=populateAccountMenu("modal-signup");if(null===n||void 0===n)return!1;n.modal("show")}function showLoginModal(){var n=populateAccountMenu("modal-login");if(null===n||void 0===n)return!1;n.modal("show")}function extractRawBaseObj(n){var e=$("#"+n+" .cst-input-email").first().prop("value"),o=$("#"+n+" .cst-input-vid-addr").first(),t=o.prop("selectedIndex")||0;return{email:e,acct:o.children()[t].value}}function dismissSignupModal(){$("#modal-signup-form").trigger("reset"),$("#modal-signup").modal("hide")}function dismissLoginModal(){$("#modal-login-form").trigger("reset"),$("#modal-login").modal("hide")}function performSignup(){var n="modal-signup",e=$("#"+n);if(null===e||void 0===e)return!1;var o=extractRawBaseObj(n);o.fullName=$("#"+n+" .cst-input-full-name").first().prop("value"),window.enki.prepareSignupMsg(o).then(window.enki.signMessage).then(function(n){dismissSignupModal()}).catch(function(n){alert("Could not sign the message!")})}function performLogin(){var n="modal-login",e=$("#"+n);if(null===e||void 0===e)return!1;var o=extractRawBaseObj(n);window.enki.prepareLoginMsg(o).then(window.enki.signMessage).then(function(n){dismissLoginModal()}).catch(function(n){alert("Could not sign the message!")})}window.addEventListener("load",function(){window.enki=new Enki("visc.network"),window.enki.startApp().then(function(n){var e=n.netId;n.accounts;populateNetworkId(e)})});
